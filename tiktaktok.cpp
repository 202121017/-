#define _CRT_SECURE_NO_WARNINGS
#include <stdio.h> //step 1 빙고판 설계 step 2 p1으로 혼자서 빙고판 설계 step 3 p2를 추가하고 서로 번갈아서 하는걸로 완성

int main() {
    int a[3][3] = { 1, 2, 3, 4, 5, 6, 7, 8, 9 }; // 3x3 배열 초기화
    int i, j; // 행과 열을 위한 변수
    int p1, p2;   // 플레이어 1과 플레이어 2
    int ch;//같은 값을 선택했을 때를 방지하는 변수
    int re = 9;

    printf("현재 빙고판의 상태:\n");//while문 안에 넣어버리면 원하는 값이 안 나와서 밖으로 빼서 썼음
    for (i = 0; i < 3; i++) {
        for (j = 0; j < 3; j++) {
            if (a[i][j] == -1) { // 결국은 1~9는 사용할 수 없으니 -1로 대체 
                printf(" O ");//이미 선택된 배열의 숫자는 O로 표시
            }
            else if (a[i][j] == -2) {//-1을 사용했으니 -2로 사용
                printf(" X ");//이미 선택된 배열의 숫자는 X로 표시
            }
            else {
                printf("%2d ", a[i][j]); //만약 선택되지 않은 숫자는 그대로 표시
            }
        }
        printf("\n");
    }
    while (1) {//반복문으로 계속 중첩되게 하려고 함


        // 플레이어 1이 숫자 선택
        printf("플레이어 1, 어떤 숫자를 선택하시겠습니까? ");
        scanf("%d", &p1);
        // 배열에서 선택한 숫자를 "O"로 변경
        ch = 0;
        for (i = 0; i < 3; i++) {
            for (j = 0; j < 3; j++) {
                if (a[i][j] == p1) { // 입력값을 배열에서 찾은 경우
                    a[i][j] = -1;// 선택한 숫자를 -1로 변경 ("O")
                    ch = 1;//살아있는 값인지를 표시
                }
            }
        }
        if (!ch) {//만약 살아있는 선택되지 않았던 값들을 선택하면
            printf("잘못된 입력입니다.\n");
            continue;
        }
        re--;
        if ((a[0][0] == -1 && a[0][1] == -1 && a[0][2] == -1) || // 가로 3 세로 3 대각선 2 나올 수 있는 총 횟수
            (a[1][0] == -1 && a[1][1] == -1 && a[1][2] == -1) || // 조건이 같기 때문에 그냥 if문으로만 활용하여 사용
            (a[2][0] == -1 && a[2][1] == -1 && a[2][2] == -1) || // 물론 이것보다 가독성이 좋게 짤 수 있음
            (a[0][0] == -1 && a[1][0] == -1 && a[2][0] == -1) || // 3*3 배열이라서 이렇게 짜놓았음
            (a[0][1] == -1 && a[1][1] == -1 && a[2][1] == -1) ||
            (a[0][2] == -1 && a[1][2] == -1 && a[2][2] == -1) ||
            (a[0][0] == -1 && a[1][1] == -1 && a[2][2] == -1) ||
            (a[0][2] == -1 && a[1][1] == -1 && a[2][0] == -1)) {
            printf("수고하셨습니다.player1 승리하셨습니다!\n");
            break;
        }
        if (re == 0) {
            printf("남은 숫자가 없습니다 재시작해주세요");
            break;
        }
            printf("현재 빙고판의 상태:\n");//p1이 선택한 후의 빙고판 
            for (i = 0; i < 3; i++) {
                for (j = 0; j < 3; j++) {
                    if (a[i][j] == -1) { // 결국은 1~9는 사용할 수 없으니 -1로 대체 
                        printf(" O ");//이미 선택된 배열의 숫자는 O로 표시
                    }
                    else if (a[i][j] == -2) {
                        printf(" X ");
                    }
                    else {
                        printf("%2d ", a[i][j]); //만약 선택되지 않은 숫자는 그대로 표시
                    }
                }
                printf("\n");
            }
            printf("플레이어 2, 어떤 숫자를 선택하시겠습니까? ");
            scanf("%d", &p2);
            // 배열에서 선택한 숫자를 "O"로 변경
            ch = 0;
            for (i = 0; i < 3; i++) {
                for (j = 0; j < 3; j++) {
                    if (a[i][j] == p2) { // 입력값을 배열에서 찾은 경우
                        a[i][j] = -2;// 선택한 숫자를 -1로 변경 ("O")
                        ch = 1;//살아있는 값인지를 표시
                    }
                }
            }
            if (!ch) {//만약 살아있는 선택되지 않았던 값들을 선택하면
                printf("잘못된 입력입니다.\n");
                continue;
            }
            re--;
            if ((a[0][0] == -2 && a[0][1] == -2 && a[0][2] == -2) || // 가로 3 세로 3 대각선 2 나올 수 있는 총 횟수
                (a[1][0] == -2 && a[1][1] == -2 && a[1][2] == -2) || // 조건이 같기 때문에 그냥 if문으로만 활용하여 사용
                (a[2][0] == -2 && a[2][1] == -2 && a[2][2] == -2) ||
                (a[0][0] == -2 && a[1][0] == -2 && a[2][0] == -2) ||
                (a[0][1] == -2 && a[1][1] == -2 && a[2][1] == -2) ||
                (a[0][2] == -2 && a[1][2] == -2 && a[2][2] == -2) ||
                (a[0][0] == -2 && a[1][1] == -2 && a[2][2] == -2) ||
                (a[0][2] == -2 && a[1][1] == -2 && a[2][0] == -2)) {
                printf("수고하셨습니다.player2!\n");
                break;
            }
            if (re == 0) {
                printf("남은 숫자가 없습니다 재시작해주세요");
                break;
            }
            printf("현재 빙고판의 상태:\n");//p2가 선택한 후의 상태
            for (i = 0; i < 3; i++) {
                for (j = 0; j < 3; j++) {
                    if (a[i][j] == -1) { // 결국은 1~9는 사용할 수 없으니 -1로 대체 
                        printf(" O ");//이미 선택된 배열의 숫자는 O로 표시
                    }
                    else if (a[i][j] == -2) {
                        printf(" X ");
                    }
                    else {
                        printf("%2d ", a[i][j]); //만약 선택되지 않은 숫자는 그대로 표시
                    }
                }
                printf("\n");
            }
        }
        return 0;
    }
